{"ast":null,"code":"import _objectSpread from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/ashitosh/mineapp/mine3/src/components/register.js\";\nimport React, { Component, Fragment } from \"react\";\nimport fire from \"./../config/firebase\";\nimport { Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport Spinner from \"../UI/Spinner\";\nimport moment from \"moment\";\nvar initialState = {\n  success: \"\",\n  error: \"\",\n  loading: false\n};\n\nvar Register =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Register, _Component);\n\n  function Register(props) {\n    var _this;\n\n    _classCallCheck(this, Register);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Register).call(this, props));\n\n    _this.onSubmitRegister = function (e) {\n      e.preventDefault();\n\n      _this.setState({\n        loading: true\n      });\n\n      if (!_this.props.registration.email || !_this.props.registration.fullname || !_this.props.registration.password) {\n        return _this.setState({\n          error: {\n            message: \"Please enter required details\"\n          },\n          loading: false\n        });\n      }\n\n      _this.registerAction(); // fire\n      //   .auth()\n      //   .createUserWithEmailAndPassword(\n      //     this.props.registration.email,\n      //     this.props.registration.password\n      //   )\n      //   .then(u => {\n      //     var key = \"users/\" + this.props.registration.fullname;\n      //     fire\n      //       .database()\n      //       .ref(key)\n      //       .set({\n      //         email: this.props.registration.email,\n      //         password: this.props.registration.password,\n      //         fullname: this.props.registration.fullname,\n      //         created_on: moment().format(),\n      //         updated_on: moment().format()\n      //       })\n      //       .then(data => {\n      //         this.reset();\n      //         this.setState({ success: \"User registered successfully\" });\n      //       })\n      //       .catch(error => {\n      //         this.setState({ error: error, loading: false });\n      //       });\n      //   })\n      //   .catch(error => {\n      //     this.setState({ error: error, loading: false });\n      //   });\n\n    };\n\n    _this.registerAction =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var res, res2;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _this.validateDataWithFireBase();\n\n            case 3:\n              res = _context.sent;\n              _context.next = 6;\n              return _this.insertToDatabase();\n\n            case 6:\n              res2 = _context.sent;\n\n              _this.reset();\n\n              _this.setState({\n                success: \"User registered successfully\"\n              });\n\n              _context.next = 14;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](0);\n\n              _this.setState({\n                error: _context.t0,\n                loading: false\n              });\n\n            case 14:\n              console.log(\"111asdad\");\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 11]]);\n    }));\n    _this.state = _objectSpread({}, initialState);\n    return _this;\n  }\n\n  _createClass(Register, [{\n    key: \"reset\",\n    value: function reset() {\n      this.setState(initialState);\n    }\n  }, {\n    key: \"validateDataWithFireBase\",\n    value: function validateDataWithFireBase() {\n      return fire.auth().createUserWithEmailAndPassword(this.props.registration.email, this.props.registration.password);\n    }\n  }, {\n    key: \"insertToDatabase\",\n    value: function insertToDatabase() {\n      var key = \"users/\" + this.props.registration.fullname;\n      return fire.database().ref(key).set({\n        email: this.props.registration.email,\n        password: this.props.registration.password,\n        fullname: this.props.registration.fullname,\n        created_on: moment().format(),\n        updated_on: moment().format()\n      });\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.setState({\n        loading: true\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setState({\n        loading: false\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          success = _this$state.success,\n          error = _this$state.error,\n          loading = _this$state.loading;\n      var registrationPage = React.createElement(\"div\", {\n        style: {\n          width: \"100%\",\n          height: \"100%\",\n          borderRadius: \"5px\",\n          justifyContent: \"center\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          width: \"40%\",\n          marginTop: \"50px\",\n          background: \"gray\",\n          borderRadius: \"5px\",\n          alignContent: \"center\",\n          justifyContent: \"center\",\n          marginLeft: \"30%\",\n          color: \"white\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }), React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"Register Page\")), error ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        style: {\n          color: \"red\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, error.message)) : null, success ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        style: {\n          color: \"green\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, success)) : null, React.createElement(\"div\", {\n        style: {\n          marginTop: \"20px\"\n        },\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        style: {\n          width: \"20%\"\n        },\n        htmlFor: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, \"Email :\"), React.createElement(\"input\", {\n        style: {\n          borderRadius: \"5px\"\n        },\n        type: \"text\",\n        name: \"email\",\n        placeholder: \" Email\",\n        onChange: this.props.onInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        style: {\n          width: \"20%\"\n        },\n        htmlFor: \"fullname\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, \"Full Name :\"), React.createElement(\"input\", {\n        style: {\n          borderRadius: \"5px\"\n        },\n        type: \"text\",\n        name: \"fullname\",\n        placeholder: \" Full Name\",\n        onChange: this.props.onInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        style: {\n          width: \"20%\"\n        },\n        htmlFor: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, \"Password :\"), React.createElement(\"input\", {\n        style: {\n          borderRadius: \"5px\"\n        },\n        type: \"text\",\n        name: \"password\",\n        placeholder: \" Password\",\n        onChange: this.props.onInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        style: {\n          width: \"70px\",\n          borderRadius: \"5px\",\n          background: \"green\",\n          borderStyle: \"none\",\n          padding: \"5px\",\n          color: \"white\"\n        },\n        onClick: this.onSubmitRegister,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, \"Register\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }), \"or \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, \"Already registered \"), React.createElement(Link, {\n        style: {\n          color: \"#f4a941\",\n          fontWeight: \"bold\"\n        },\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, \"Login\"), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, \" from here\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      })))));\n\n      if (loading) {\n        registrationPage = React.createElement(Spinner, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 237\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, registrationPage);\n    }\n  }]);\n\n  return Register;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    registration: state.authState\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    onInputChange: function onInputChange(e) {\n      return dispatch({\n        type: \"onChange\",\n        name: e.target.name,\n        value: e.target.value\n      });\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Register);","map":{"version":3,"sources":["/home/ashitosh/mineapp/mine3/src/components/register.js"],"names":["React","Component","Fragment","fire","Link","connect","Spinner","moment","initialState","success","error","loading","Register","props","onSubmitRegister","e","preventDefault","setState","registration","email","fullname","password","message","registerAction","validateDataWithFireBase","res","insertToDatabase","res2","reset","console","log","state","auth","createUserWithEmailAndPassword","key","database","ref","set","created_on","format","updated_on","registrationPage","width","height","borderRadius","justifyContent","marginTop","background","alignContent","marginLeft","color","onInputChange","borderStyle","padding","fontWeight","mapStateToProps","authState","mapDispatchToProps","dispatch","type","name","target","value"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,IAAP,MAAiB,sBAAjB;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,OAAP,MAAoB,eAApB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AAEA,IAAMC,YAAY,GAAG;AACnBC,EAAAA,OAAO,EAAE,EADU;AAEnBC,EAAAA,KAAK,EAAE,EAFY;AAGnBC,EAAAA,OAAO,EAAE;AAHU,CAArB;;IAMMC,Q;;;;;AACJ,oBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,kFAAMA,KAAN;;AADiB,UASnBC,gBATmB,GASA,UAAAC,CAAC,EAAI;AACtBA,MAAAA,CAAC,CAACC,cAAF;;AACA,YAAKC,QAAL,CAAc;AACZN,QAAAA,OAAO,EAAE;AADG,OAAd;;AAIA,UACE,CAAC,MAAKE,KAAL,CAAWK,YAAX,CAAwBC,KAAzB,IACA,CAAC,MAAKN,KAAL,CAAWK,YAAX,CAAwBE,QADzB,IAEA,CAAC,MAAKP,KAAL,CAAWK,YAAX,CAAwBG,QAH3B,EAIE;AACA,eAAO,MAAKJ,QAAL,CAAc;AACnBP,UAAAA,KAAK,EAAE;AAAEY,YAAAA,OAAO,EAAE;AAAX,WADY;AAEnBX,UAAAA,OAAO,EAAE;AAFU,SAAd,CAAP;AAID;;AAED,YAAKY,cAAL,GAjBsB,CAkBtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACD,KAxDkB;;AAAA,UAiFnBA,cAjFmB;AAAA;AAAA;AAAA;AAAA,6BAiFF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEK,MAAKC,wBAAL,EAFL;;AAAA;AAEPC,cAAAA,GAFO;AAAA;AAAA,qBAIM,MAAKC,gBAAL,EAJN;;AAAA;AAIPC,cAAAA,IAJO;;AAKb,oBAAKC,KAAL;;AACA,oBAAKX,QAAL,CAAc;AAAER,gBAAAA,OAAO,EAAE;AAAX,eAAd;;AANa;AAAA;;AAAA;AAAA;AAAA;;AAQb,oBAAKQ,QAAL,CAAc;AACZP,gBAAAA,KAAK,aADO;AAEZC,gBAAAA,OAAO,EAAE;AAFG,eAAd;;AARa;AAcfkB,cAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;;AAde;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAjFE;AAEjB,UAAKC,KAAL,qBAAkBvB,YAAlB;AAFiB;AAGlB;;;;4BAEO;AACN,WAAKS,QAAL,CAAcT,YAAd;AACD;;;+CAmD0B;AACzB,aAAOL,IAAI,CACR6B,IADI,GAEJC,8BAFI,CAGH,KAAKpB,KAAL,CAAWK,YAAX,CAAwBC,KAHrB,EAIH,KAAKN,KAAL,CAAWK,YAAX,CAAwBG,QAJrB,CAAP;AAMD;;;uCAEkB;AACjB,UAAIa,GAAG,GAAG,WAAW,KAAKrB,KAAL,CAAWK,YAAX,CAAwBE,QAA7C;AACA,aAAOjB,IAAI,CACRgC,QADI,GAEJC,GAFI,CAEAF,GAFA,EAGJG,GAHI,CAGA;AACHlB,QAAAA,KAAK,EAAE,KAAKN,KAAL,CAAWK,YAAX,CAAwBC,KAD5B;AAEHE,QAAAA,QAAQ,EAAE,KAAKR,KAAL,CAAWK,YAAX,CAAwBG,QAF/B;AAGHD,QAAAA,QAAQ,EAAE,KAAKP,KAAL,CAAWK,YAAX,CAAwBE,QAH/B;AAIHkB,QAAAA,UAAU,EAAE/B,MAAM,GAAGgC,MAAT,EAJT;AAKHC,QAAAA,UAAU,EAAEjC,MAAM,GAAGgC,MAAT;AALT,OAHA,CAAP;AAUD;;;yCAmBoB;AACnB,WAAKtB,QAAL,CAAc;AACZN,QAAAA,OAAO,EAAE;AADG,OAAd;AAGD;;;wCACmB;AAClB,WAAKM,QAAL,CAAc;AACZN,QAAAA,OAAO,EAAE;AADG,OAAd;AAGD;;;6BAEQ;AAAA,wBAC6B,KAAKoB,KADlC;AAAA,UACCtB,OADD,eACCA,OADD;AAAA,UACUC,KADV,eACUA,KADV;AAAA,UACiBC,OADjB,eACiBA,OADjB;AAEP,UAAI8B,gBAAgB,GAClB;AACE,QAAA,KAAK,EAAE;AACLC,UAAAA,KAAK,EAAE,MADF;AAELC,UAAAA,MAAM,EAAE,MAFH;AAGLC,UAAAA,YAAY,EAAE,KAHT;AAILC,UAAAA,cAAc,EAAE;AAJX,SADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AACE,QAAA,KAAK,EAAE;AACLH,UAAAA,KAAK,EAAE,KADF;AAELI,UAAAA,SAAS,EAAE,MAFN;AAGLC,UAAAA,UAAU,EAAE,MAHP;AAILH,UAAAA,YAAY,EAAE,KAJT;AAKLI,UAAAA,YAAY,EAAE,QALT;AAMLH,UAAAA,cAAc,EAAE,QANX;AAOLI,UAAAA,UAAU,EAAE,KAPP;AAQLC,UAAAA,KAAK,EAAE;AARF,SADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAYE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAZF,EAaE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,CAbF,EAgBGxC,KAAK,GACJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAG,QAAA,KAAK,EAAE;AAAEwC,UAAAA,KAAK,EAAE;AAAT,SAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA6BxC,KAAK,CAACY,OAAnC,CADF,CADI,GAIF,IApBN,EAsBGb,OAAO,GACN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAG,QAAA,KAAK,EAAE;AAAEyC,UAAAA,KAAK,EAAE;AAAT,SAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA+BzC,OAA/B,CADF,CADM,GAIJ,IA1BN,EA2BE;AAAK,QAAA,KAAK,EAAE;AAAEqC,UAAAA,SAAS,EAAE;AAAb,SAAZ;AAAmC,QAAA,SAAS,EAAC,YAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAO,QAAA,KAAK,EAAE;AAAEJ,UAAAA,KAAK,EAAE;AAAT,SAAd;AAAgC,QAAA,OAAO,EAAC,OAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,EAIE;AACE,QAAA,KAAK,EAAE;AAAEE,UAAAA,YAAY,EAAE;AAAhB,SADT;AAEE,QAAA,IAAI,EAAC,MAFP;AAGE,QAAA,IAAI,EAAC,OAHP;AAIE,QAAA,WAAW,EAAC,QAJd;AAKE,QAAA,QAAQ,EAAE,KAAK/B,KAAL,CAAWsC,aALvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJF,CA3BF,EAwCE;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAO,QAAA,KAAK,EAAE;AAAET,UAAAA,KAAK,EAAE;AAAT,SAAd;AAAgC,QAAA,OAAO,EAAC,UAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,EAIE;AACE,QAAA,KAAK,EAAE;AAAEE,UAAAA,YAAY,EAAE;AAAhB,SADT;AAEE,QAAA,IAAI,EAAC,MAFP;AAGE,QAAA,IAAI,EAAC,UAHP;AAIE,QAAA,WAAW,EAAC,YAJd;AAKE,QAAA,QAAQ,EAAE,KAAK/B,KAAL,CAAWsC,aALvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJF,CAxCF,EAqDE;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAO,QAAA,KAAK,EAAE;AAAET,UAAAA,KAAK,EAAE;AAAT,SAAd;AAAgC,QAAA,OAAO,EAAC,UAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,EAIE;AACE,QAAA,KAAK,EAAE;AAAEE,UAAAA,YAAY,EAAE;AAAhB,SADT;AAEE,QAAA,IAAI,EAAC,MAFP;AAGE,QAAA,IAAI,EAAC,UAHP;AAIE,QAAA,WAAW,EAAC,WAJd;AAKE,QAAA,QAAQ,EAAE,KAAK/B,KAAL,CAAWsC,aALvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJF,CArDF,EAkEE;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AACE,QAAA,KAAK,EAAE;AACLT,UAAAA,KAAK,EAAE,MADF;AAELE,UAAAA,YAAY,EAAE,KAFT;AAGLG,UAAAA,UAAU,EAAE,OAHP;AAILK,UAAAA,WAAW,EAAE,MAJR;AAKLC,UAAAA,OAAO,EAAE,KALJ;AAMLH,UAAAA,KAAK,EAAE;AANF,SADT;AASE,QAAA,OAAO,EAAE,KAAKpC,gBAThB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,EAcE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAdF,SAeK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAfL,EAgBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BADF,EAEE,oBAAC,IAAD;AACE,QAAA,KAAK,EAAE;AAAEoC,UAAAA,KAAK,EAAE,SAAT;AAAoBI,UAAAA,UAAU,EAAE;AAAhC,SADT;AAEE,QAAA,EAAE,EAAE,QAFN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAFF,EAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBARF,EASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QATF,CAhBF,EA2BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QA3BF,CAlEF,CADF,CARF,CADF;;AA8GA,UAAI3C,OAAJ,EAAa;AACX8B,QAAAA,gBAAgB,GAAG,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAnB;AACD;;AAED,aAAO,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAWA,gBAAX,CAAP;AACD;;;;EAnOoBxC,S;;AAsOvB,IAAMsD,eAAe,GAAG,SAAlBA,eAAkB,CAAAxB,KAAK,EAAI;AAC/B,SAAO;AACLb,IAAAA,YAAY,EAAEa,KAAK,CAACyB;AADf,GAAP;AAGD,CAJD;;AAMA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAC,QAAQ,EAAI;AACrC,SAAO;AACLP,IAAAA,aAAa,EAAE,uBAAApC,CAAC;AAAA,aACd2C,QAAQ,CAAC;AACPC,QAAAA,IAAI,EAAE,UADC;AAEPC,QAAAA,IAAI,EAAE7C,CAAC,CAAC8C,MAAF,CAASD,IAFR;AAGPE,QAAAA,KAAK,EAAE/C,CAAC,CAAC8C,MAAF,CAASC;AAHT,OAAD,CADM;AAAA;AADX,GAAP;AAQD,CATD;;AAWA,eAAezD,OAAO,CACpBkD,eADoB,EAEpBE,kBAFoB,CAAP,CAGb7C,QAHa,CAAf","sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport fire from \"./../config/firebase\";\nimport { Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport Spinner from \"../UI/Spinner\";\nimport moment from \"moment\";\n\nconst initialState = {\n  success: \"\",\n  error: \"\",\n  loading: false\n};\n\nclass Register extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { ...initialState };\n  }\n\n  reset() {\n    this.setState(initialState);\n  }\n\n  onSubmitRegister = e => {\n    e.preventDefault();\n    this.setState({\n      loading: true\n    });\n\n    if (\n      !this.props.registration.email ||\n      !this.props.registration.fullname ||\n      !this.props.registration.password\n    ) {\n      return this.setState({\n        error: { message: \"Please enter required details\" },\n        loading: false\n      });\n    }\n\n    this.registerAction();\n    // fire\n    //   .auth()\n    //   .createUserWithEmailAndPassword(\n    //     this.props.registration.email,\n    //     this.props.registration.password\n    //   )\n    //   .then(u => {\n    //     var key = \"users/\" + this.props.registration.fullname;\n    //     fire\n    //       .database()\n    //       .ref(key)\n    //       .set({\n    //         email: this.props.registration.email,\n    //         password: this.props.registration.password,\n    //         fullname: this.props.registration.fullname,\n    //         created_on: moment().format(),\n    //         updated_on: moment().format()\n    //       })\n    //       .then(data => {\n    //         this.reset();\n    //         this.setState({ success: \"User registered successfully\" });\n    //       })\n    //       .catch(error => {\n    //         this.setState({ error: error, loading: false });\n    //       });\n    //   })\n    //   .catch(error => {\n    //     this.setState({ error: error, loading: false });\n    //   });\n  };\n\n  validateDataWithFireBase() {\n    return fire\n      .auth()\n      .createUserWithEmailAndPassword(\n        this.props.registration.email,\n        this.props.registration.password\n      );\n  }\n\n  insertToDatabase() {\n    var key = \"users/\" + this.props.registration.fullname;\n    return fire\n      .database()\n      .ref(key)\n      .set({\n        email: this.props.registration.email,\n        password: this.props.registration.password,\n        fullname: this.props.registration.fullname,\n        created_on: moment().format(),\n        updated_on: moment().format()\n      });\n  }\n\n  registerAction = async () => {\n    try {\n      const res = await this.validateDataWithFireBase();\n\n      const res2 = await this.insertToDatabase();\n      this.reset();\n      this.setState({ success: \"User registered successfully\" });\n    } catch (e) {\n      this.setState({\n        error: e,\n        loading: false\n      });\n    }\n\n    console.log(\"111asdad\");\n  };\n\n  componentWillMount() {\n    this.setState({\n      loading: true\n    });\n  }\n  componentDidMount() {\n    this.setState({\n      loading: false\n    });\n  }\n\n  render() {\n    const { success, error, loading } = this.state;\n    let registrationPage = (\n      <div\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n          borderRadius: \"5px\",\n          justifyContent: \"center\"\n        }}\n      >\n        <form>\n          <div\n            style={{\n              width: \"40%\",\n              marginTop: \"50px\",\n              background: \"gray\",\n              borderRadius: \"5px\",\n              alignContent: \"center\",\n              justifyContent: \"center\",\n              marginLeft: \"30%\",\n              color: \"white\"\n            }}\n          >\n            <br />\n            <h3>\n              <strong>Register Page</strong>\n            </h3>\n            {error ? (\n              <div>\n                <p style={{ color: \"red\" }}>{error.message}</p>\n              </div>\n            ) : null}\n\n            {success ? (\n              <div>\n                <p style={{ color: \"green\" }}>{success}</p>\n              </div>\n            ) : null}\n            <div style={{ marginTop: \"20px\" }} className=\"form-group\">\n              <label style={{ width: \"20%\" }} htmlFor=\"email\">\n                Email :\n              </label>\n              <input\n                style={{ borderRadius: \"5px\" }}\n                type=\"text\"\n                name=\"email\"\n                placeholder=\" Email\"\n                onChange={this.props.onInputChange}\n              />\n            </div>\n\n            <div className=\"form-group\">\n              <label style={{ width: \"20%\" }} htmlFor=\"fullname\">\n                Full Name :\n              </label>\n              <input\n                style={{ borderRadius: \"5px\" }}\n                type=\"text\"\n                name=\"fullname\"\n                placeholder=\" Full Name\"\n                onChange={this.props.onInputChange}\n              />\n            </div>\n\n            <div className=\"form-group\">\n              <label style={{ width: \"20%\" }} htmlFor=\"password\">\n                Password :\n              </label>\n              <input\n                style={{ borderRadius: \"5px\" }}\n                type=\"text\"\n                name=\"password\"\n                placeholder=\" Password\"\n                onChange={this.props.onInputChange}\n              />\n            </div>\n\n            <div className=\"form-group\">\n              <button\n                style={{\n                  width: \"70px\",\n                  borderRadius: \"5px\",\n                  background: \"green\",\n                  borderStyle: \"none\",\n                  padding: \"5px\",\n                  color: \"white\"\n                }}\n                onClick={this.onSubmitRegister}\n              >\n                Register\n              </button>\n              <br />\n              or <br />\n              <div>\n                <span>Already registered </span>\n                <Link\n                  style={{ color: \"#f4a941\", fontWeight: \"bold\" }}\n                  to={\"/login\"}\n                >\n                  Login\n                </Link>\n                <span> from here</span>\n                <br />\n              </div>\n              <br />\n            </div>\n          </div>\n        </form>\n      </div>\n    );\n\n    if (loading) {\n      registrationPage = <Spinner />;\n    }\n\n    return <Fragment>{registrationPage}</Fragment>;\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    registration: state.authState\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onInputChange: e =>\n      dispatch({\n        type: \"onChange\",\n        name: e.target.name,\n        value: e.target.value\n      })\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Register);\n"]},"metadata":{},"sourceType":"module"}