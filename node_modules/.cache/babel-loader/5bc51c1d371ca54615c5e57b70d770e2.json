{"ast":null,"code":"import _objectSpread from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/ashitosh/mineapp/mine3/src/components/showpages.js\";\nimport React, { Component, Fragment } from \"react\";\nimport fire from \"./../config/firebase\";\nimport { Link } from \"react-router-dom\";\nimport parse from \"html-react-parser\";\nimport Truncate from \"react-truncate\";\nimport moment from \"moment\";\nimport { connect } from \"react-redux\";\nimport Spinner from \"../UI/Spinner\";\nimport _ from \"lodash\";\n\nvar ShowPages =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ShowPages, _Component);\n\n  function ShowPages(props) {\n    var _this;\n\n    _classCallCheck(this, ShowPages);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ShowPages).call(this, props));\n\n    _this.onDeleteHandler = function (e, title) {\n      e.preventDefault();\n\n      _this.setState({\n        loading: true\n      });\n\n      fire.database().ref(\"/pages/\".concat(title)).remove();\n\n      _this.onListenForPages();\n\n      _this.props.history.push(\"/showpages\");\n\n      _this.setState({\n        loading: false\n      });\n    };\n\n    _this.onListenForPages = function () {\n      fire.database().ref().child(\"pages\").orderByKey().once(\"value\", function (snapshot) {\n        var message = snapshot.val();\n\n        _this.setState({\n          pages: message\n        });\n\n        _this.props.onSetPages(message);\n\n        var msg = Object.keys(message || {}).map(function (key) {\n          return _objectSpread({}, message[key]);\n        });\n\n        var msg1 = _this.getPaginatedItems(msg, 1, 10);\n\n        _this.setState({\n          paginationObj: msg1\n        });\n      });\n    };\n\n    _this.onSearch = function () {\n      _this.setState({\n        loading: true\n      });\n\n      var sortedObject;\n      var finalArray = [];\n      sortedObject = _this.props.pages;\n\n      for (var key in _this.props.pages) {\n        var abc = _.some([_this.props.pages[key].title.toLowerCase()], _.method(\"includes\", _this.state.filterText.toLowerCase()));\n\n        if (abc === true) {\n          finalArray.push(_this.props.pages[key]);\n        }\n      }\n\n      if (_this.state.filterText.length > 0) {\n        sortedObject = [].concat(finalArray);\n      }\n\n      var msg1 = _this.getPaginatedItems(sortedObject, 1, 10);\n\n      _this.setState({\n        paginationObj: msg1,\n        loading: false\n      });\n    };\n\n    _this.onChangeFilter = function (event) {\n      _this.setState({\n        filterText: event.target.value\n      });\n    };\n\n    _this.state = {\n      pages: null,\n      sortOrder: \"asc\",\n      filterText: null,\n      paginationObj: null,\n      loading: false\n    };\n    return _this;\n  }\n\n  _createClass(ShowPages, [{\n    key: \"sortby\",\n    value: function sortby(sortKey) {\n      this.setState({\n        loading: true\n      });\n\n      var sortedObject = _.orderBy(this.props.pages, sortKey, this.state.sortOrder);\n\n      var msg1 = this.getPaginatedItems(sortedObject, 1, 10);\n      this.setState({\n        paginationObj: msg1\n      });\n\n      if (this.state.sortOrder === \"asc\") {\n        this.setState({\n          sortOrder: \"desc\"\n        });\n      } else {\n        this.setState({\n          sortOrder: \"asc\"\n        });\n      }\n\n      this.setState({\n        loading: false\n      });\n    }\n  }, {\n    key: \"getPaginatedItems\",\n    value: function getPaginatedItems(items, page, pageSize) {\n      var pg = page || 1,\n          pgSize = pageSize || 100,\n          offset = (pg - 1) * pgSize,\n          pagedItems = _.drop(items, offset).slice(0, pgSize);\n\n      return {\n        page: pg,\n        pageSize: pgSize,\n        total: items.length,\n        total_pages: Math.ceil(items.length / pgSize),\n        data: pagedItems\n      };\n    }\n  }, {\n    key: \"onNextPage\",\n    value: function onNextPage(page) {\n      this.setState({\n        loading: true\n      });\n      var msg1 = this.getPaginatedItems(this.props.pages, page, 10);\n      this.setState({\n        paginationObj: msg1,\n        loading: false\n      });\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.setState({\n        loading: true\n      });\n      this.onListenForPages();\n      this.setState({\n        loading: false\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      console.log(process.env.REACT_APP_BASE_URL);\n      var paginationObj = this.state.paginationObj;\n\n      if (!paginationObj) {\n        return null;\n      }\n\n      var pages = this.state.paginationObj.data;\n      var filterText = this.state.filterText;\n      var loading = this.state.loading;\n      var items = [];\n      var selected = \"\";\n\n      var _loop = function _loop() {\n        selected = \"page-item\";\n\n        if (paginationObj.page === i) {\n          selected = \"page-item active\";\n        }\n\n        var s = i;\n        items.push(React.createElement(\"li\", {\n          className: selected,\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 170\n          },\n          __self: this\n        }, React.createElement(Link, {\n          className: \"page-link\",\n          onClick: function onClick(i) {\n            return _this2.onNextPage(s);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 171\n          },\n          __self: this\n        }, i)));\n      };\n\n      for (var i = 1; i <= paginationObj.total_pages; i++) {\n        _loop();\n      }\n\n      var showpages = React.createElement(\"div\", {\n        className: \"container\",\n        style: {\n          backgroundColor: \"white\",\n          borderRadius: \"5px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          width: \"100%\",\n          padding: \"10px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          width: \"21%\",\n          padding: \"10px\",\n          float: \"right\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/createpage\",\n        className: \"btn btn-primary\",\n        title: \"Add Page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-plus-circle\",\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }), \" Add Page\"), React.createElement(Link, {\n        style: {\n          marginLeft: \"5px\"\n        },\n        to: \"/charts\",\n        className: \"btn btn-primary\",\n        title: \"Charts\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-pie-chart\",\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }), \" Charts\")), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        style: {\n          padding: \"10px\",\n          marginLeft: \"10px\",\n          marginRight: \"10px\",\n          borderRadius: \"5px\",\n          borderStyle: \"none\",\n          border: \"1px solid gainsboro\"\n        },\n        placeholder: \"Filter by title\",\n        onChange: this.onChangeFilter,\n        value: filterText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        style: {\n          padding: \"5px\",\n          borderRadius: \"5px\",\n          width: \"80px\",\n          borderStyle: \"none\",\n          backgroundColor: \"grey\",\n          color: \"white\"\n        },\n        onClick: this.onSearch,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, \"Search\"))), React.createElement(\"div\", {\n        className: \"col-md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        className: \"table\",\n        style: {\n          border: \"1px solid gainsboro\",\n          borderRadius: \"10px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        className: \"thead-dark\",\n        style: {\n          border: \"1px solid black\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, React.createElement(Link, {\n        style: {\n          textDecoration: \"none\",\n          color: \"white\"\n        },\n        onClick: function onClick(e) {\n          _this2.sortby(\"title\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, \"Page\")), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, React.createElement(Link, {\n        style: {\n          textDecoration: \"none\",\n          color: \"white\"\n        },\n        onClick: function onClick(e) {\n          _this2.sortby(\"content\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }, \"Content\")), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }, React.createElement(Link, {\n        style: {\n          textDecoration: \"none\",\n          color: \"white\"\n        },\n        onClick: function onClick(e) {\n          _this2.sortby(\"author\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }, \"Author\")), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }, React.createElement(Link, {\n        style: {\n          textDecoration: \"none\",\n          color: \"white\"\n        },\n        onClick: function onClick(e) {\n          _this2.sortby(\"status\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }, \"Status\")), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }, React.createElement(Link, {\n        style: {\n          textDecoration: \"none\",\n          color: \"white\"\n        },\n        onClick: function onClick(e) {\n          _this2.sortby(\"updated_on\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }, \"Updated On\")), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }, \"Action\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307\n        },\n        __self: this\n      }, pages.map(function (page) {\n        return React.createElement(\"tr\", {\n          key: page.title,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 310\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 311\n          },\n          __self: this\n        }, page.title), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 312\n          },\n          __self: this\n        }, React.createElement(Truncate, {\n          lines: 1,\n          ellipsis: React.createElement(\"span\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 313\n            },\n            __self: this\n          }, \"...\"),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 313\n          },\n          __self: this\n        }, parse(page.content))), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 317\n          },\n          __self: this\n        }, page.author), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 318\n          },\n          __self: this\n        }, page.status === \"on_Hold\" ? \"On Hold\" : \"Published\"), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 321\n          },\n          __self: this\n        }, moment(page.updated_on).format(\"MM/DD/YYYY\")), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 322\n          },\n          __self: this\n        }, React.createElement(Link, {\n          style: {\n            display: \"inline\"\n          },\n          to: \"editpage/\" + page.title,\n          className: \"nav-link\",\n          title: \"Edit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 323\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"fa fa-edit\",\n          \"aria-hidden\": \"true\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 329\n          },\n          __self: this\n        })), React.createElement(Link, {\n          style: {\n            display: \"inline\"\n          },\n          title: \"Delete\",\n          onClick: function onClick(e) {\n            if (window.confirm(\"Are you sure you wish to delete this item?\")) _this2.onDeleteHandler(e, page.title);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 331\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"fa fa-trash\",\n          \"aria-hidden\": \"true\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 343\n          },\n          __self: this\n        })), React.createElement(Link, {\n          style: {\n            display: \"inline\"\n          },\n          to: \"/preview/\" + page.title,\n          className: \"nav-link\",\n          title: \"Preview\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 345\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"fa fa-eye\",\n          \"aria-hidden\": \"true\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 351\n          },\n          __self: this\n        }))));\n      }))), pages.length === 0 ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360\n        },\n        __self: this\n      }, \"No pages found. \", React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361\n        },\n        __self: this\n      })) : null, React.createElement(\"div\", {\n        style: {\n          backgroundColor: \"red\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 365\n        },\n        __self: this\n      }, React.createElement(\"nav\", {\n        style: {\n          width: \"80%\",\n          float: \"left\"\n        },\n        \"aria-label\": \"Page navigation example\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        className: \"pagination justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 370\n        },\n        __self: this\n      }, items)), React.createElement(\"nav\", {\n        style: {\n          width: \"15%\",\n          float: \"right\"\n        },\n        \"aria-label\": \"Page navigation example\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        className: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 376\n        },\n        __self: this\n      }, \"Total Pages: \", pages.length))))));\n\n      if (loading) {\n        showpages = React.createElement(Spinner, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 385\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 387\n        },\n        __self: this\n      }, showpages);\n    }\n  }]);\n\n  return ShowPages;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    pages: Object.keys(state.pageState.pages || {}).map(function (key) {\n      return _objectSpread({}, state.pageState.pages[key], {\n        uid: key\n      });\n    })\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    onSetPages: function onSetPages(pages) {\n      return dispatch({\n        type: \"PAGES_SET\",\n        pages: pages\n      });\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ShowPages);","map":{"version":3,"sources":["/home/ashitosh/mineapp/mine3/src/components/showpages.js"],"names":["React","Component","Fragment","fire","Link","parse","Truncate","moment","connect","Spinner","_","ShowPages","props","onDeleteHandler","e","title","preventDefault","setState","loading","database","ref","remove","onListenForPages","history","push","child","orderByKey","once","snapshot","message","val","pages","onSetPages","msg","Object","keys","map","key","msg1","getPaginatedItems","paginationObj","onSearch","sortedObject","finalArray","abc","some","toLowerCase","method","state","filterText","length","onChangeFilter","event","target","value","sortOrder","sortKey","orderBy","items","page","pageSize","pg","pgSize","offset","pagedItems","drop","slice","total","total_pages","Math","ceil","data","console","log","process","env","REACT_APP_BASE_URL","selected","i","s","onNextPage","showpages","backgroundColor","borderRadius","width","padding","float","marginLeft","marginRight","borderStyle","border","color","textDecoration","sortby","content","author","status","updated_on","format","display","window","confirm","mapStateToProps","pageState","uid","mapDispatchToProps","dispatch","type"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport fire from \"./../config/firebase\";\nimport { Link } from \"react-router-dom\";\nimport parse from \"html-react-parser\";\nimport Truncate from \"react-truncate\";\nimport moment from \"moment\";\nimport { connect } from \"react-redux\";\nimport Spinner from \"../UI/Spinner\";\nimport _ from \"lodash\";\n\nclass ShowPages extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      pages: null,\n      sortOrder: \"asc\",\n      filterText: null,\n      paginationObj: null,\n      loading: false\n    };\n  }\n\n  onDeleteHandler = (e, title) => {\n    e.preventDefault();\n    this.setState({\n      loading: true\n    });\n\n    fire\n      .database()\n      .ref(`/pages/${title}`)\n      .remove();\n    this.onListenForPages();\n    this.props.history.push(\"/showpages\");\n    this.setState({\n      loading: false\n    });\n  };\n\n  onListenForPages = () => {\n    fire\n      .database()\n      .ref()\n      .child(\"pages\")\n      .orderByKey()\n      .once(\"value\", snapshot => {\n        let message = snapshot.val();\n        this.setState({ pages: message });\n        this.props.onSetPages(message);\n\n        let msg = Object.keys(message || {}).map(key => ({\n          ...message[key]\n        }));\n        let msg1 = this.getPaginatedItems(msg, 1, 10);\n        this.setState({ paginationObj: msg1 });\n      });\n  };\n\n  sortby(sortKey) {\n    this.setState({\n      loading: true\n    });\n\n    let sortedObject = _.orderBy(\n      this.props.pages,\n      sortKey,\n      this.state.sortOrder\n    );\n\n    let msg1 = this.getPaginatedItems(sortedObject, 1, 10);\n    this.setState({ paginationObj: msg1 });\n\n    if (this.state.sortOrder === \"asc\") {\n      this.setState({ sortOrder: \"desc\" });\n    } else {\n      this.setState({ sortOrder: \"asc\" });\n    }\n    this.setState({\n      loading: false\n    });\n  }\n\n  getPaginatedItems(items, page, pageSize) {\n    var pg = page || 1,\n      pgSize = pageSize || 100,\n      offset = (pg - 1) * pgSize,\n      pagedItems = _.drop(items, offset).slice(0, pgSize);\n    return {\n      page: pg,\n      pageSize: pgSize,\n      total: items.length,\n      total_pages: Math.ceil(items.length / pgSize),\n      data: pagedItems\n    };\n  }\n\n  onSearch = () => {\n    this.setState({\n      loading: true\n    });\n\n    var sortedObject;\n    var finalArray = [];\n    sortedObject = this.props.pages;\n\n    for (var key in this.props.pages) {\n      var abc = _.some(\n        [this.props.pages[key].title.toLowerCase()],\n        _.method(\"includes\", this.state.filterText.toLowerCase())\n      );\n      if (abc === true) {\n        finalArray.push(this.props.pages[key]);\n      }\n    }\n\n    if (this.state.filterText.length > 0) {\n      sortedObject = [...finalArray];\n    }\n\n    let msg1 = this.getPaginatedItems(sortedObject, 1, 10);\n    this.setState({ paginationObj: msg1, loading: false });\n  };\n\n  onNextPage(page) {\n    this.setState({\n      loading: true\n    });\n\n    let msg1 = this.getPaginatedItems(this.props.pages, page, 10);\n    this.setState({ paginationObj: msg1, loading: false });\n  }\n\n  onChangeFilter = event => {\n    this.setState({ filterText: event.target.value });\n  };\n\n  componentWillMount() {\n    this.setState({\n      loading: true\n    });\n    this.onListenForPages();\n    this.setState({\n      loading: false\n    });\n  }\n\n  render() {\n    console.log(process.env.REACT_APP_BASE_URL);\n    const paginationObj = this.state.paginationObj;\n    if (!paginationObj) {\n      return null;\n    }\n\n    const pages = this.state.paginationObj.data;\n    const filterText = this.state.filterText;\n    const loading = this.state.loading;\n\n    const items = [];\n    let selected = \"\";\n\n    for (var i = 1; i <= paginationObj.total_pages; i++) {\n      selected = \"page-item\";\n      if (paginationObj.page === i) {\n        selected = \"page-item active\";\n      }\n      const s = i;\n\n      items.push(\n        <li className={selected} key={i}>\n          <Link className=\"page-link\" onClick={i => this.onNextPage(s)}>\n            {i}\n          </Link>\n        </li>\n      );\n    }\n\n    var showpages = (\n      <div\n        className=\"container\"\n        style={{ backgroundColor: \"white\", borderRadius: \"5px\" }}\n      >\n        <div className=\"row\">\n          <div\n            style={{\n              width: \"100%\",\n              padding: \"10px\"\n            }}\n          >\n            <div\n              style={{\n                width: \"21%\",\n                padding: \"10px\",\n                float: \"right\"\n              }}\n            >\n              <Link\n                to={\"/createpage\"}\n                className=\"btn btn-primary\"\n                title=\"Add Page\"\n              >\n                <i className=\"fa fa-plus-circle\" aria-hidden=\"true\" /> Add Page\n              </Link>\n              <Link\n                style={{ marginLeft: \"5px\" }}\n                to={\"/charts\"}\n                className=\"btn btn-primary\"\n                title=\"Charts\"\n              >\n                <i className=\"fa fa-pie-chart\" aria-hidden=\"true\" /> Charts\n              </Link>\n            </div>\n            <div>\n              <input\n                type=\"text\"\n                style={{\n                  padding: \"10px\",\n                  marginLeft: \"10px\",\n                  marginRight: \"10px\",\n                  borderRadius: \"5px\",\n                  borderStyle: \"none\",\n                  border: \"1px solid gainsboro\"\n                }}\n                placeholder=\"Filter by title\"\n                onChange={this.onChangeFilter}\n                value={filterText}\n              />\n              <button\n                style={{\n                  padding: \"5px\",\n                  borderRadius: \"5px\",\n                  width: \"80px\",\n                  borderStyle: \"none\",\n                  backgroundColor: \"grey\",\n                  color: \"white\"\n                }}\n                onClick={this.onSearch}\n              >\n                Search\n              </button>\n            </div>\n          </div>\n\n          <div className=\"col-md-12\">\n            <table\n              className=\"table\"\n              style={{ border: \"1px solid gainsboro\", borderRadius: \"10px\" }}\n            >\n              <thead\n                className=\"thead-dark\"\n                style={{ border: \"1px solid black\" }}\n              >\n                <tr>\n                  <th>\n                    <Link\n                      style={{ textDecoration: \"none\", color: \"white\" }}\n                      onClick={e => {\n                        this.sortby(\"title\");\n                      }}\n                    >\n                      Page\n                    </Link>\n                  </th>\n                  <th>\n                    <Link\n                      style={{ textDecoration: \"none\", color: \"white\" }}\n                      onClick={e => {\n                        this.sortby(\"content\");\n                      }}\n                    >\n                      Content\n                    </Link>\n                  </th>\n                  <th>\n                    <Link\n                      style={{ textDecoration: \"none\", color: \"white\" }}\n                      onClick={e => {\n                        this.sortby(\"author\");\n                      }}\n                    >\n                      Author\n                    </Link>\n                  </th>\n                  <th>\n                    <Link\n                      style={{ textDecoration: \"none\", color: \"white\" }}\n                      onClick={e => {\n                        this.sortby(\"status\");\n                      }}\n                    >\n                      Status\n                    </Link>\n                  </th>\n                  <th>\n                    <Link\n                      style={{ textDecoration: \"none\", color: \"white\" }}\n                      onClick={e => {\n                        this.sortby(\"updated_on\");\n                      }}\n                    >\n                      Updated On\n                    </Link>\n                  </th>\n                  <th>Action</th>\n                </tr>\n              </thead>\n              <tbody>\n                {pages.map(page => {\n                  return (\n                    <tr key={page.title}>\n                      <td>{page.title}</td>\n                      <td>\n                        <Truncate lines={1} ellipsis={<span>...</span>}>\n                          {parse(page.content)}\n                        </Truncate>\n                      </td>\n                      <td>{page.author}</td>\n                      <td>\n                        {page.status === \"on_Hold\" ? \"On Hold\" : \"Published\"}\n                      </td>\n                      <td>{moment(page.updated_on).format(\"MM/DD/YYYY\")}</td>\n                      <td>\n                        <Link\n                          style={{ display: \"inline\" }}\n                          to={\"editpage/\" + page.title}\n                          className=\"nav-link\"\n                          title=\"Edit\"\n                        >\n                          <i className=\"fa fa-edit\" aria-hidden=\"true\" />\n                        </Link>\n                        <Link\n                          style={{ display: \"inline\" }}\n                          title=\"Delete\"\n                          onClick={e => {\n                            if (\n                              window.confirm(\n                                \"Are you sure you wish to delete this item?\"\n                              )\n                            )\n                              this.onDeleteHandler(e, page.title);\n                          }}\n                        >\n                          <i className=\"fa fa-trash\" aria-hidden=\"true\" />\n                        </Link>\n                        <Link\n                          style={{ display: \"inline\" }}\n                          to={\"/preview/\" + page.title}\n                          className=\"nav-link\"\n                          title=\"Preview\"\n                        >\n                          <i className=\"fa fa-eye\" aria-hidden=\"true\" />\n                        </Link>\n                      </td>\n                    </tr>\n                  );\n                })}\n              </tbody>\n            </table>\n            {pages.length === 0 ? (\n              <div>\n                No pages found. <hr />\n              </div>\n            ) : null}\n\n            <div style={{ backgroundColor: \"red\" }}>\n              <nav\n                style={{ width: \"80%\", float: \"left\" }}\n                aria-label=\"Page navigation example\"\n              >\n                <ul className=\"pagination justify-content-center\">{items}</ul>\n              </nav>\n              <nav\n                style={{ width: \"15%\", float: \"right\" }}\n                aria-label=\"Page navigation example\"\n              >\n                <ul className=\"\">Total Pages: {pages.length}</ul>\n              </nav>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n\n    if (loading) {\n      showpages = <Spinner />;\n    }\n    return <Fragment>{showpages}</Fragment>;\n  }\n}\n\nconst mapStateToProps = state => ({\n  pages: Object.keys(state.pageState.pages || {}).map(key => ({\n    ...state.pageState.pages[key],\n    uid: key\n  }))\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onSetPages: pages => dispatch({ type: \"PAGES_SET\", pages })\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ShowPages);\n"]},"metadata":{},"sourceType":"module"}