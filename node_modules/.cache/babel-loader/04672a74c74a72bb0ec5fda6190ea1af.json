{"ast":null,"code":"import _regeneratorRuntime from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/ashitosh/mineapp/mine3/src/components/createpage.js\";\nimport React, { Component, Fragment } from \"react\";\nimport fire from \"./../config/firebase\";\nimport { Link } from \"react-router-dom\";\nimport \"froala-editor/js/froala_editor.pkgd.min.js\";\nimport \"froala-editor/css/froala_style.min.css\";\nimport \"froala-editor/css/froala_editor.pkgd.min.css\";\nimport \"font-awesome/css/font-awesome.css\";\nimport FroalaEditor from \"react-froala-wysiwyg\";\nimport { connect } from \"react-redux\";\nimport Spinner from \"../UI/Spinner\";\nimport moment from \"moment\";\nvar initialState = {\n  error: \"\",\n  loading: false\n};\n\nvar Createpage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Createpage, _Component);\n\n  function Createpage(props) {\n    var _this;\n\n    _classCallCheck(this, Createpage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Createpage).call(this, props));\n\n    _this.onSubmitCreatepage = function (e) {\n      e.preventDefault();\n\n      _this.setState({\n        loading: true\n      });\n\n      Object.entries(_this.props.pageState).forEach(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n            key = _ref2[0],\n            val = _ref2[1];\n\n        if (val == null) delete _this.props.pageState[key];\n      });\n      var key = \"pages/\" + _this.props.pageState.title;\n      fire.database().ref(key).set({\n        title: _this.props.pageState.title,\n        content: _this.props.pageState.content,\n        status: _this.props.pageState.status,\n        author: localStorage.getItem(\"authUser\"),\n        created_on: moment().format(),\n        updated_on: moment().format()\n      }).then(function (data) {\n        _this.setState({\n          loading: false\n        });\n\n        _this.props.history.push(\"/showpages\");\n      }).catch(function (error) {\n        _this.setState({\n          loading: false,\n          error: error\n        });\n      });\n    };\n\n    _this.createPageAction =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _this.createPageData();\n\n            case 3:\n              _this.reset();\n\n              _this.setState({\n                loading: false\n              });\n\n              _this.props.history.push(\"/showpages\");\n\n              _context.next = 11;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n\n              _this.setState({\n                loading: false,\n                error: _context.t0\n              });\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 8]]);\n    }));\n    _this.state = initialState;\n    _this.onSubmitCreatepage = _this.onSubmitCreatepage.bind();\n    return _this;\n  }\n\n  _createClass(Createpage, [{\n    key: \"createPageData\",\n    value: function createPageData() {\n      var key = \"pages/\" + (this.props.pageState.title ? this.props.pageState.title : this.state.title);\n      return fire.database().ref(key).set({\n        title: this.props.pageState.title ? this.props.pageState.title : this.state.title,\n        content: this.props.pageState.content ? this.props.pageState.content : this.state.content,\n        status: this.props.pageState.status ? this.props.pageState.status : this.state.status,\n        author: this.props.pageState.author ? this.props.pageState.author : this.state.author,\n        updated_on: moment().format()\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          error = _this$state.error,\n          loading = _this$state.loading;\n      var createPage = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          width: \"100%\",\n          textAlign: \"center\",\n          alignContent: \"center\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, \"Create Page\"), error ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        style: {\n          color: \"red\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, error.message)) : null, React.createElement(\"label\", {\n        htmlFor: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \" Title : \"), React.createElement(\"input\", {\n        style: {\n          borderRadius: \"5px\",\n          padding: \"5px\",\n          width: \"25%\",\n          marginLeft: \"10px\"\n        },\n        type: \"text\",\n        name: \"title\",\n        placeholder: \" Title\" // value={title}\n        ,\n        onChange: this.props.onInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, \" Content : \"), React.createElement(\"div\", {\n        style: {\n          width: \"50%\",\n          textAlign: \"center\",\n          alignContent: \"center\",\n          marginLeft: \"25%\",\n          borderRadius: \"5px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(FroalaEditor, {\n        tag: \"textarea\" // model={content}\n        ,\n        onModelChange: this.props.onModelChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"status\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, \" Status : \"), React.createElement(\"select\", {\n        style: {\n          borderRadius: \"5px\",\n          padding: \"5px\",\n          width: \"15%\",\n          backgroundColor: \"white\",\n          marginLeft: \"10px\"\n        },\n        name: \"status\",\n        onChange: this.props.onInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, \"Select Status\"), React.createElement(\"option\", {\n        value: \"published\" // selected={status == \"published\" ? \"selected\" : null}\n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, \"Published\"), React.createElement(\"option\", {\n        value: \"on_Hold\" // selected={status == \"on_Hold\" ? \"selected\" : null}\n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, \"On Hold\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        style: {\n          borderRadius: \"5px\",\n          background: \"green\",\n          padding: \"5px\",\n          borderStyle: \"none\",\n          color: \"white\",\n          width: \"110px\"\n        },\n        onClick: this.onSubmitCreatepage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, \"Create Page\"), \" \", \"or\", React.createElement(Link, {\n        to: \"/showpages\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, \" Cancel \"))));\n\n      if (loading) {\n        createPage = React.createElement(Spinner, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 208\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, createPage);\n    }\n  }]);\n\n  return Createpage;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    pageState: state.authState\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    onInputChange: function onInputChange(e) {\n      return dispatch({\n        type: \"onChange\",\n        name: e.target.name,\n        value: e.target.value\n      });\n    },\n    onModelChange: function onModelChange(model) {\n      return dispatch({\n        type: \"onChange\",\n        name: \"content\",\n        value: model\n      });\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Createpage);","map":{"version":3,"sources":["/home/ashitosh/mineapp/mine3/src/components/createpage.js"],"names":["React","Component","Fragment","fire","Link","FroalaEditor","connect","Spinner","moment","initialState","error","loading","Createpage","props","onSubmitCreatepage","e","preventDefault","setState","Object","entries","pageState","forEach","key","val","title","database","ref","set","content","status","author","localStorage","getItem","created_on","format","updated_on","then","data","history","push","catch","createPageAction","createPageData","reset","state","bind","createPage","width","textAlign","alignContent","color","message","borderRadius","padding","marginLeft","onInputChange","onModelChange","backgroundColor","background","borderStyle","mapStateToProps","authState","mapDispatchToProps","dispatch","type","name","target","value","model"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport fire from \"./../config/firebase\";\nimport { Link } from \"react-router-dom\";\n\nimport \"froala-editor/js/froala_editor.pkgd.min.js\";\nimport \"froala-editor/css/froala_style.min.css\";\nimport \"froala-editor/css/froala_editor.pkgd.min.css\";\nimport \"font-awesome/css/font-awesome.css\";\nimport FroalaEditor from \"react-froala-wysiwyg\";\nimport { connect } from \"react-redux\";\nimport Spinner from \"../UI/Spinner\";\nimport moment from \"moment\";\n\nconst initialState = {\n  error: \"\",\n  loading: false\n};\n\nclass Createpage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = initialState;\n    this.onSubmitCreatepage = this.onSubmitCreatepage.bind();\n  }\n\n  onSubmitCreatepage = e => {\n    e.preventDefault();\n\n    this.setState({\n      loading: true\n    });\n\n    Object.entries(this.props.pageState).forEach(([key, val]) => {\n      if (val == null) delete this.props.pageState[key];\n    });\n\n    var key = \"pages/\" + this.props.pageState.title;\n\n    fire\n      .database()\n      .ref(key)\n      .set({\n        title: this.props.pageState.title,\n        content: this.props.pageState.content,\n        status: this.props.pageState.status,\n        author: localStorage.getItem(\"authUser\"),\n        created_on: moment().format(),\n        updated_on: moment().format()\n      })\n      .then(data => {\n        this.setState({\n          loading: false\n        });\n        this.props.history.push(\"/showpages\");\n      })\n      .catch(error => {\n        this.setState({\n          loading: false,\n          error: error\n        });\n      });\n  };\n\n  createPageAction = async () => {\n    try {\n      await this.createPageData();\n\n      this.reset();\n      this.setState({\n        loading: false\n      });\n      this.props.history.push(\"/showpages\");\n    } catch (e) {\n      this.setState({\n        loading: false,\n        error: e\n      });\n    }\n  };\n\n  createPageData() {\n    var key =\n      \"pages/\" +\n      (this.props.pageState.title\n        ? this.props.pageState.title\n        : this.state.title);\n\n    return fire\n      .database()\n      .ref(key)\n      .set({\n        title: this.props.pageState.title\n          ? this.props.pageState.title\n          : this.state.title,\n        content: this.props.pageState.content\n          ? this.props.pageState.content\n          : this.state.content,\n        status: this.props.pageState.status\n          ? this.props.pageState.status\n          : this.state.status,\n        author: this.props.pageState.author\n          ? this.props.pageState.author\n          : this.state.author,\n        updated_on: moment().format()\n      });\n  }\n\n  render() {\n    const { error, loading } = this.state;\n\n    let createPage = (\n      <div>\n        <form>\n          <div\n            style={{\n              width: \"100%\",\n              textAlign: \"center\",\n              alignContent: \"center\"\n            }}\n          >\n            <h3>Create Page</h3>\n            {error ? (\n              <div>\n                <p style={{ color: \"red\" }}>{error.message}</p>\n              </div>\n            ) : null}\n            <label htmlFor=\"title\"> Title : </label>\n            <input\n              style={{\n                borderRadius: \"5px\",\n                padding: \"5px\",\n                width: \"25%\",\n                marginLeft: \"10px\"\n              }}\n              type=\"text\"\n              name=\"title\"\n              placeholder=\" Title\"\n              // value={title}\n              onChange={this.props.onInputChange}\n            />\n            <br />\n            <label htmlFor=\"content\"> Content : </label>\n            <div\n              style={{\n                width: \"50%\",\n                textAlign: \"center\",\n                alignContent: \"center\",\n                marginLeft: \"25%\",\n                borderRadius: \"5px\"\n              }}\n            >\n              <FroalaEditor\n                tag=\"textarea\"\n                // model={content}\n                onModelChange={this.props.onModelChange}\n              />\n            </div>\n            <br />\n            <label htmlFor=\"status\"> Status : </label>\n            <select\n              style={{\n                borderRadius: \"5px\",\n                padding: \"5px\",\n                width: \"15%\",\n                backgroundColor: \"white\",\n                marginLeft: \"10px\"\n              }}\n              name=\"status\"\n              onChange={this.props.onInputChange}\n            >\n              <option>Select Status</option>\n              <option\n                value=\"published\"\n                // selected={status == \"published\" ? \"selected\" : null}\n              >\n                Published\n              </option>\n              <option\n                value=\"on_Hold\"\n                // selected={status == \"on_Hold\" ? \"selected\" : null}\n              >\n                On Hold\n              </option>\n            </select>\n            <br />\n            <hr />\n            <button\n              style={{\n                borderRadius: \"5px\",\n                background: \"green\",\n                padding: \"5px\",\n                borderStyle: \"none\",\n                color: \"white\",\n                width: \"110px\"\n              }}\n              onClick={this.onSubmitCreatepage}\n            >\n              Create Page\n            </button>{\" \"}\n            or\n            <Link to={\"/showpages\"}> Cancel </Link>\n          </div>\n        </form>\n      </div>\n    );\n\n    if (loading) {\n      createPage = <Spinner />;\n    }\n    return <Fragment>{createPage}</Fragment>;\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    pageState: state.authState\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onInputChange: e =>\n      dispatch({\n        type: \"onChange\",\n        name: e.target.name,\n        value: e.target.value\n      }),\n    onModelChange: model =>\n      dispatch({\n        type: \"onChange\",\n        name: \"content\",\n        value: model\n      })\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Createpage);\n"]},"metadata":{},"sourceType":"module"}