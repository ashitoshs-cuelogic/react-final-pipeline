{"ast":null,"code":"import _objectSpread from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/ashitosh/mineapp/mine3/src/components/editpage.js\";\nimport React, { Component, Fragment } from \"react\";\nimport fire from \"./../config/firebase\";\nimport { Link } from \"react-router-dom\";\nimport \"froala-editor/js/froala_editor.pkgd.min.js\";\nimport \"froala-editor/css/froala_style.min.css\";\nimport \"froala-editor/css/froala_editor.pkgd.min.css\";\nimport \"font-awesome/css/font-awesome.css\";\nimport FroalaEditor from \"react-froala-wysiwyg\";\nimport { connect } from \"react-redux\";\nimport Spinner from \"../UI/Spinner\";\nimport moment from \"moment\";\nvar initialState = {\n  title: \"\",\n  content: \"\",\n  status: \"\",\n  author: \"\",\n  error: \"\",\n  loading: false\n};\n\nvar Editpage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Editpage, _Component);\n\n  function Editpage(props) {\n    var _this;\n\n    _classCallCheck(this, Editpage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Editpage).call(this, props));\n\n    _this.onSubmitCreatepage = function (e) {\n      e.preventDefault();\n\n      _this.setState({\n        loading: true\n      });\n\n      _this.editPageAction(); // var key =\n      //   \"pages/\" +\n      //   (this.props.pageState.title\n      //     ? this.props.pageState.title\n      //     : this.state.title);\n      // fire\n      //   .database()\n      //   .ref(key)\n      //   .set({\n      //     title: this.props.pageState.title\n      //       ? this.props.pageState.title\n      //       : this.state.title,\n      //     content: this.props.pageState.content\n      //       ? this.props.pageState.content\n      //       : this.state.content,\n      //     status: this.props.pageState.status\n      //       ? this.props.pageState.status\n      //       : this.state.status,\n      //     author: this.props.pageState.author\n      //       ? this.props.pageState.author\n      //       : this.state.author,\n      //     updated_on: moment().format()\n      //   })\n      //   .then(data => {\n      //     this.reset();\n      //     this.setState({\n      //       loading: false\n      //     });\n      //     this.props.history.push(\"/showpages\");\n      //   })\n      //   .catch(error => {\n      //     this.setState({\n      //       loading: false,\n      //       error: error\n      //     });\n      //   });\n\n    };\n\n    _this.editPageAction =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _this.updatePageData();\n\n            case 3:\n              _this.reset();\n\n              _this.setState({\n                loading: false\n              });\n\n              _this.props.history.push(\"/showpages\");\n\n              _context.next = 11;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n\n              _this.setState({\n                loading: false,\n                error: _context.t0\n              });\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 8]]);\n    }));\n    _this.state = initialState;\n    return _this;\n  }\n\n  _createClass(Editpage, [{\n    key: \"reset\",\n    value: function reset() {\n      this.setState(initialState);\n    }\n  }, {\n    key: \"updatePageData\",\n    value: function updatePageData() {\n      var key = \"pages/\" + (this.props.pageState.title ? this.props.pageState.title : this.state.title);\n      return fire.database().ref(key).set({\n        title: this.props.pageState.title ? this.props.pageState.title : this.state.title,\n        content: this.props.pageState.content ? this.props.pageState.content : this.state.content,\n        status: this.props.pageState.status ? this.props.pageState.status : this.state.status,\n        author: this.props.pageState.author ? this.props.pageState.author : this.state.author,\n        updated_on: moment().format()\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var pageId = this.props.match.params.id;\n      fire.database().ref(\"/pages\").orderByChild(\"title\").equalTo(pageId).on(\"value\", function (snapshot) {\n        snapshot.forEach(function (userSnapshot) {\n          var data = userSnapshot.val();\n\n          _this2.setState({\n            title: data.title,\n            content: data.content,\n            status: data.status,\n            author: data.author\n          });\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state$this$prop = _objectSpread({}, this.state, this.props.pageState),\n          title = _this$state$this$prop.title,\n          content = _this$state$this$prop.content,\n          status = _this$state$this$prop.status,\n          error = _this$state$this$prop.error,\n          loading = _this$state$this$prop.loading;\n\n      var editPage = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, \" \", React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          width: \"100%\",\n          textAlign: \"center\",\n          alignContent: \"center\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, \"Edit Page\"), error ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        style: {\n          color: \"red\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, error.message)) : null, React.createElement(\"label\", {\n        htmlFor: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, \" Title : \"), React.createElement(\"input\", {\n        style: {\n          borderRadius: \"5px\",\n          padding: \"5px\",\n          width: \"25%\",\n          marginLeft: \"10px\"\n        },\n        type: \"text\",\n        name: \"title\",\n        placeholder: \" Title\",\n        value: title,\n        onChange: this.props.onInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, \" Content : \"), React.createElement(\"div\", {\n        style: {\n          width: \"50%\",\n          textAlign: \"center\",\n          alignContent: \"center\",\n          marginLeft: \"25%\",\n          borderRadius: \"5px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(FroalaEditor, {\n        tag: \"textarea\",\n        model: content,\n        onModelChange: this.props.onModelChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"status\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, \" Status : \"), React.createElement(\"select\", {\n        style: {\n          borderRadius: \"5px\",\n          padding: \"5px\",\n          width: \"15%\",\n          backgroundColor: \"white\",\n          marginLeft: \"10px\"\n        },\n        name: \"status\",\n        onChange: this.props.onInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, \"Select Status\"), React.createElement(\"option\", {\n        value: \"published\",\n        selected: status === \"published\" ? \"selected\" : null,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, \"Published\"), React.createElement(\"option\", {\n        value: \"on_Hold\",\n        selected: status === \"on_Hold\" ? \"selected\" : null,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, \"On Hold\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        style: {\n          borderRadius: \"5px\",\n          background: \"green\",\n          padding: \"5px\",\n          borderStyle: \"none\",\n          color: \"white\",\n          width: \"110px\"\n        },\n        onClick: this.onSubmitCreatepage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, \"Update Page\"), \" \", \"or\", React.createElement(Link, {\n        to: \"/showpages\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, \" Cancel \"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }))));\n\n      if (loading) {\n        editPage = React.createElement(Spinner, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 245\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, editPage);\n    }\n  }]);\n\n  return Editpage;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    pageState: state.authState\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    onInputChange: function onInputChange(e) {\n      return dispatch({\n        type: \"onChange\",\n        name: e.target.name,\n        value: e.target.value\n      });\n    },\n    onModelChange: function onModelChange(model) {\n      return dispatch({\n        type: \"onChange\",\n        name: \"content\",\n        value: model\n      });\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Editpage);","map":{"version":3,"sources":["/home/ashitosh/mineapp/mine3/src/components/editpage.js"],"names":["React","Component","Fragment","fire","Link","FroalaEditor","connect","Spinner","moment","initialState","title","content","status","author","error","loading","Editpage","props","onSubmitCreatepage","e","preventDefault","setState","editPageAction","updatePageData","reset","history","push","state","key","pageState","database","ref","set","updated_on","format","pageId","match","params","id","orderByChild","equalTo","on","snapshot","forEach","userSnapshot","data","val","editPage","width","textAlign","alignContent","color","message","borderRadius","padding","marginLeft","onInputChange","onModelChange","backgroundColor","background","borderStyle","mapStateToProps","authState","mapDispatchToProps","dispatch","type","name","target","value","model"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport fire from \"./../config/firebase\";\nimport { Link } from \"react-router-dom\";\nimport \"froala-editor/js/froala_editor.pkgd.min.js\";\nimport \"froala-editor/css/froala_style.min.css\";\nimport \"froala-editor/css/froala_editor.pkgd.min.css\";\nimport \"font-awesome/css/font-awesome.css\";\nimport FroalaEditor from \"react-froala-wysiwyg\";\nimport { connect } from \"react-redux\";\nimport Spinner from \"../UI/Spinner\";\nimport moment from \"moment\";\n\nconst initialState = {\n  title: \"\",\n  content: \"\",\n  status: \"\",\n  author: \"\",\n  error: \"\",\n  loading: false\n};\n\nclass Editpage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = initialState;\n  }\n\n  reset() {\n    this.setState(initialState);\n  }\n\n  onSubmitCreatepage = e => {\n    e.preventDefault();\n    this.setState({\n      loading: true\n    });\n\n    this.editPageAction();\n    // var key =\n    //   \"pages/\" +\n    //   (this.props.pageState.title\n    //     ? this.props.pageState.title\n    //     : this.state.title);\n    // fire\n    //   .database()\n    //   .ref(key)\n    //   .set({\n    //     title: this.props.pageState.title\n    //       ? this.props.pageState.title\n    //       : this.state.title,\n    //     content: this.props.pageState.content\n    //       ? this.props.pageState.content\n    //       : this.state.content,\n    //     status: this.props.pageState.status\n    //       ? this.props.pageState.status\n    //       : this.state.status,\n    //     author: this.props.pageState.author\n    //       ? this.props.pageState.author\n    //       : this.state.author,\n    //     updated_on: moment().format()\n    //   })\n    //   .then(data => {\n    //     this.reset();\n    //     this.setState({\n    //       loading: false\n    //     });\n    //     this.props.history.push(\"/showpages\");\n    //   })\n    //   .catch(error => {\n    //     this.setState({\n    //       loading: false,\n    //       error: error\n    //     });\n    //   });\n  };\n\n  updatePageData() {\n    var key =\n      \"pages/\" +\n      (this.props.pageState.title\n        ? this.props.pageState.title\n        : this.state.title);\n\n    return fire\n      .database()\n      .ref(key)\n      .set({\n        title: this.props.pageState.title\n          ? this.props.pageState.title\n          : this.state.title,\n        content: this.props.pageState.content\n          ? this.props.pageState.content\n          : this.state.content,\n        status: this.props.pageState.status\n          ? this.props.pageState.status\n          : this.state.status,\n        author: this.props.pageState.author\n          ? this.props.pageState.author\n          : this.state.author,\n        updated_on: moment().format()\n      });\n  }\n  editPageAction = async () => {\n    try {\n      await this.updatePageData();\n\n      this.reset();\n      this.setState({\n        loading: false\n      });\n      this.props.history.push(\"/showpages\");\n    } catch (e) {\n      this.setState({\n        loading: false,\n        error: e\n      });\n    }\n  };\n\n  componentDidMount() {\n    let pageId = this.props.match.params.id;\n    fire\n      .database()\n      .ref(\"/pages\")\n      .orderByChild(\"title\")\n      .equalTo(pageId)\n      .on(\"value\", snapshot => {\n        snapshot.forEach(userSnapshot => {\n          let data = userSnapshot.val();\n          this.setState({\n            title: data.title,\n            content: data.content,\n            status: data.status,\n            author: data.author\n          });\n        });\n      });\n  }\n  render() {\n    const { title, content, status, error, loading } = {\n      ...this.state,\n      ...this.props.pageState\n    };\n\n    var editPage = (\n      <div>\n        {\" \"}\n        <form>\n          <div\n            style={{\n              width: \"100%\",\n              textAlign: \"center\",\n              alignContent: \"center\"\n            }}\n          >\n            <h1>Edit Page</h1>\n            {error ? (\n              <div>\n                <p style={{ color: \"red\" }}>{error.message}</p>\n              </div>\n            ) : null}\n            <label htmlFor=\"title\"> Title : </label>\n            <input\n              style={{\n                borderRadius: \"5px\",\n                padding: \"5px\",\n                width: \"25%\",\n                marginLeft: \"10px\"\n              }}\n              type=\"text\"\n              name=\"title\"\n              placeholder=\" Title\"\n              value={title}\n              onChange={this.props.onInputChange}\n            />\n            <br />\n            <label htmlFor=\"content\"> Content : </label>\n            <div\n              style={{\n                width: \"50%\",\n                textAlign: \"center\",\n                alignContent: \"center\",\n                marginLeft: \"25%\",\n                borderRadius: \"5px\"\n              }}\n            >\n              <FroalaEditor\n                tag=\"textarea\"\n                model={content}\n                onModelChange={this.props.onModelChange}\n              />\n            </div>\n            <br />\n            <label htmlFor=\"status\"> Status : </label>\n            <select\n              style={{\n                borderRadius: \"5px\",\n                padding: \"5px\",\n                width: \"15%\",\n                backgroundColor: \"white\",\n                marginLeft: \"10px\"\n              }}\n              name=\"status\"\n              onChange={this.props.onInputChange}\n            >\n              <option>Select Status</option>\n              <option\n                value=\"published\"\n                selected={status === \"published\" ? \"selected\" : null}\n              >\n                Published\n              </option>\n              <option\n                value=\"on_Hold\"\n                selected={status === \"on_Hold\" ? \"selected\" : null}\n              >\n                On Hold\n              </option>\n            </select>\n            <br />\n            <hr />\n            <button\n              style={{\n                borderRadius: \"5px\",\n                background: \"green\",\n                padding: \"5px\",\n                borderStyle: \"none\",\n                color: \"white\",\n                width: \"110px\"\n              }}\n              onClick={this.onSubmitCreatepage}\n            >\n              Update Page\n            </button>{\" \"}\n            or\n            <Link to={\"/showpages\"}> Cancel </Link>\n            <br />\n            <br />\n          </div>\n        </form>\n      </div>\n    );\n\n    if (loading) {\n      editPage = <Spinner />;\n    }\n\n    return <Fragment>{editPage}</Fragment>;\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    pageState: state.authState\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onInputChange: e =>\n      dispatch({\n        type: \"onChange\",\n        name: e.target.name,\n        value: e.target.value\n      }),\n    onModelChange: model =>\n      dispatch({\n        type: \"onChange\",\n        name: \"content\",\n        value: model\n      })\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Editpage);\n"]},"metadata":{},"sourceType":"module"}