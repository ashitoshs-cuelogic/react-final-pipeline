{"ast":null,"code":"import _classCallCheck from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/ashitosh/mineapp/mine3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/ashitosh/mineapp/mine3/src/charts/piechart.js\";\nimport React, { PureComponent, Fragment } from \"react\";\nimport { PieChart, Pie, Cell } from \"recharts\";\nimport { COLORS, renderCustomizedLabel } from \"./chartConstant\";\nimport fire from \"../config/firebase\";\nimport { Link } from \"react-router-dom\";\nimport ChartComponent from \"./ChartComponent\";\nimport _ from \"lodash\"; // const COLORS = [\"#0088FE\", \"#00C49F\", \"#FFBB28\", \"#FF8042\"];\n// const RADIAN = Math.PI / 180;\n// const renderCustomizedLabel = ({\n//   cx,\n//   cy,\n//   midAngle,\n//   innerRadius,\n//   outerRadius,\n//   percent\n// }) => {\n//   const radius = innerRadius + (outerRadius - innerRadius) * 0.5;\n//   const x = cx + radius * Math.cos(-midAngle * RADIAN);\n//   const y = cy + radius * Math.sin(-midAngle * RADIAN);\n//   return (\n//     <text\n//       x={x}\n//       y={y}\n//       fill=\"white\"\n//       textAnchor={x > cx ? \"start\" : \"end\"}\n//       dominantBaseline=\"central\"\n//     >\n//       {`${(percent * 100).toFixed(0)}%`}\n//     </text>\n//   );\n// };\n\nvar CustomPieChart =\n/*#__PURE__*/\nfunction (_PureComponent) {\n  _inherits(CustomPieChart, _PureComponent);\n\n  function CustomPieChart(props) {\n    var _this;\n\n    _classCallCheck(this, CustomPieChart);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CustomPieChart).call(this, props));\n    _this.state = {\n      auther: []\n    };\n    return _this;\n  }\n\n  _createClass(CustomPieChart, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      var a = [];\n      var b = [];\n      var abc = {};\n      fire.database().ref().child(\"pages\").orderByKey().once(\"value\", function (snapshot) {\n        var message = snapshot.val();\n        var msg = Object.keys(message || {}).map(function (key) {\n          return {\n            name: message[key].author,\n            value: 1\n          };\n        });\n        var msg1 = Object.keys(message || {}).map(function (key) {\n          return {\n            status: message[key].status\n          };\n        });\n\n        for (var index = 0; index < msg.length; index++) {\n          if (a[msg[index].name]) {\n            msg[index].value++;\n          }\n\n          a[msg[index].name] = msg[index];\n        }\n\n        var count = 0;\n\n        for (abc in a) {\n          b[count] = a[abc];\n          count++;\n        }\n\n        var category = _.countBy(msg1, function (rec) {\n          return rec.status === \"published\";\n        });\n\n        var catgoriesCount = [{\n          name: \"Published\",\n          value: category.true\n        }, {\n          name: \"On Hold\",\n          value: category.false\n        }];\n\n        _this2.setState({\n          pages: b,\n          category: catgoriesCount\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(Link, {\n        style: {\n          float: \"right\",\n          marginRight: \"10px\"\n        },\n        to: \"/showpages\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, \"Back\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          width: \"100%\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          width: \"50%\",\n          display: \"inline\",\n          float: \"left\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"pieChart\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, \"Pie Chart (Author): \")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }), this.state.pages ? this.state.pages.map(function (entry, index) {\n        return React.createElement(\"div\", {\n          style: {\n            textAlign: \"left\",\n            width: \"40%\",\n            display: \"inline\",\n            float: \"left\",\n            marginLeft: \"60px\",\n            color: COLORS[index]\n          },\n          key: {\n            index: index\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        }, index + 1, \") \", entry.name, \": \", entry.value));\n      }) : null, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }), React.createElement(ChartComponent, {\n        data: this.state.pages,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }), React.createElement(PieChart, {\n        width: 800,\n        height: 400,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(Pie, {\n        data: this.state.pages,\n        cx: 300,\n        cy: 200,\n        labelLine: false,\n        label: renderCustomizedLabel,\n        outerRadius: 100,\n        fill: \"#8884d8\",\n        dataKey: \"value\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, this.state.pages ? this.state.pages.map(function (entry, index) {\n        return React.createElement(Cell, {\n          key: \"cell-\".concat(index) // label={entry.name}\n          ,\n          fill: COLORS[index % COLORS.length],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151\n          },\n          __self: this\n        });\n      }) : null))), React.createElement(\"div\", {\n        style: {\n          width: \"49%\",\n          display: \"inline\",\n          float: \"left\",\n          borderLeft: \"1px solid gray\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"pieChart\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, \"Donut Chart (Categories): \")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }), this.state.category ? this.state.category.map(function (entry, index) {\n        return React.createElement(\"div\", {\n          style: {\n            textAlign: \"left\",\n            width: \"40%\",\n            display: \"inline\",\n            float: \"left\",\n            marginLeft: \"60px\",\n            color: COLORS[index]\n          },\n          key: {\n            index: index\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186\n          },\n          __self: this\n        }, index + 1, \") \", entry.name, \": \", entry.value), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189\n          },\n          __self: this\n        }));\n      }) : null, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }), React.createElement(PieChart, {\n        width: 800,\n        height: 400,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(Pie, {\n        data: this.state.category,\n        cx: 300,\n        cy: 200,\n        innerRadius: 60,\n        outerRadius: 100,\n        labelLine: false,\n        label: renderCustomizedLabel,\n        fill: \"#8884d8\",\n        paddingAngle: 5,\n        dataKey: \"value\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, this.state.category ? this.state.category.map(function (entry, index) {\n        return React.createElement(Cell, {\n          key: \"cell-\".concat(index),\n          fill: COLORS[index % COLORS.length],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 211\n          },\n          __self: this\n        });\n      }) : null)))));\n    }\n  }]);\n\n  return CustomPieChart;\n}(PureComponent);\n\nexport default CustomPieChart;","map":{"version":3,"sources":["/home/ashitosh/mineapp/mine3/src/charts/piechart.js"],"names":["React","PureComponent","Fragment","PieChart","Pie","Cell","COLORS","renderCustomizedLabel","fire","Link","ChartComponent","_","CustomPieChart","props","state","auther","a","b","abc","database","ref","child","orderByKey","once","snapshot","message","val","msg","Object","keys","map","key","name","author","value","msg1","status","index","length","count","category","countBy","rec","catgoriesCount","true","false","setState","pages","float","marginRight","width","display","entry","textAlign","marginLeft","color","borderLeft"],"mappings":"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","sourcesContent":["import React, { PureComponent, Fragment } from \"react\";\nimport { PieChart, Pie, Cell } from \"recharts\";\nimport { COLORS, renderCustomizedLabel } from \"./chartConstant\";\nimport fire from \"../config/firebase\";\nimport { Link } from \"react-router-dom\";\nimport ChartComponent from \"./ChartComponent\";\n\nimport _ from \"lodash\";\n\n// const COLORS = [\"#0088FE\", \"#00C49F\", \"#FFBB28\", \"#FF8042\"];\n\n// const RADIAN = Math.PI / 180;\n// const renderCustomizedLabel = ({\n//   cx,\n//   cy,\n//   midAngle,\n//   innerRadius,\n//   outerRadius,\n//   percent\n// }) => {\n//   const radius = innerRadius + (outerRadius - innerRadius) * 0.5;\n//   const x = cx + radius * Math.cos(-midAngle * RADIAN);\n//   const y = cy + radius * Math.sin(-midAngle * RADIAN);\n\n//   return (\n//     <text\n//       x={x}\n//       y={y}\n//       fill=\"white\"\n//       textAnchor={x > cx ? \"start\" : \"end\"}\n//       dominantBaseline=\"central\"\n//     >\n//       {`${(percent * 100).toFixed(0)}%`}\n//     </text>\n//   );\n// };\n\nclass CustomPieChart extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      auther: []\n    };\n  }\n\n  componentWillMount() {\n    var a = [];\n    var b = [];\n    var abc = {};\n\n    fire\n      .database()\n      .ref()\n      .child(\"pages\")\n      .orderByKey()\n      .once(\"value\", snapshot => {\n        let message = snapshot.val();\n        let msg = Object.keys(message || {}).map(key => ({\n          name: message[key].author,\n          value: 1\n        }));\n\n        let msg1 = Object.keys(message || {}).map(key => ({\n          status: message[key].status\n        }));\n\n        for (var index = 0; index < msg.length; index++) {\n          if (a[msg[index].name]) {\n            msg[index].value++;\n          }\n          a[msg[index].name] = msg[index];\n        }\n\n        var count = 0;\n        for (abc in a) {\n          b[count] = a[abc];\n          count++;\n        }\n        var category = _.countBy(msg1, function(rec) {\n          return rec.status === \"published\";\n        });\n\n        var catgoriesCount = [\n          { name: \"Published\", value: category.true },\n          { name: \"On Hold\", value: category.false }\n        ];\n\n        this.setState({ pages: b, category: catgoriesCount });\n      });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <Link style={{ float: \"right\", marginRight: \"10px\" }} to={\"/showpages\"}>\n          Back\n        </Link>\n        <br />\n        <div\n          style={{\n            width: \"100%\"\n          }}\n        >\n          <div\n            style={{\n              width: \"50%\",\n              display: \"inline\",\n              float: \"left\"\n            }}\n          >\n            <label htmlFor=\"pieChart\">\n              <strong>Pie Chart (Author): </strong>\n            </label>\n            <br />\n            {this.state.pages\n              ? this.state.pages.map((entry, index) => (\n                  <div\n                    style={{\n                      textAlign: \"left\",\n                      width: \"40%\",\n                      display: \"inline\",\n                      float: \"left\",\n                      marginLeft: \"60px\",\n                      color: COLORS[index]\n                    }}\n                    key={{ index }}\n                  >\n                    <span>\n                      {index + 1}) {entry.name}: {entry.value}\n                    </span>\n                  </div>\n                ))\n              : null}\n            <br />\n            <br />\n            <hr />\n            <ChartComponent data={this.state.pages} />\n            <PieChart width={800} height={400}>\n              <Pie\n                data={this.state.pages}\n                cx={300}\n                cy={200}\n                labelLine={false}\n                label={renderCustomizedLabel}\n                outerRadius={100}\n                fill=\"#8884d8\"\n                dataKey=\"value\"\n              >\n                {this.state.pages\n                  ? this.state.pages.map((entry, index) => (\n                      <Cell\n                        key={`cell-${index}`}\n                        // label={entry.name}\n                        fill={COLORS[index % COLORS.length]}\n                      />\n                    ))\n                  : null}\n              </Pie>\n            </PieChart>\n          </div>\n          <div\n            style={{\n              width: \"49%\",\n              display: \"inline\",\n              float: \"left\",\n              borderLeft: \"1px solid gray\"\n            }}\n          >\n            <label htmlFor=\"pieChart\">\n              <strong>Donut Chart (Categories): </strong>\n            </label>\n            <br />\n            {this.state.category\n              ? this.state.category.map((entry, index) => (\n                  <div\n                    style={{\n                      textAlign: \"left\",\n                      width: \"40%\",\n                      display: \"inline\",\n                      float: \"left\",\n                      marginLeft: \"60px\",\n                      color: COLORS[index]\n                    }}\n                    key={{ index }}\n                  >\n                    <span>\n                      {index + 1}) {entry.name}: {entry.value}\n                    </span>\n                    <br />\n                  </div>\n                ))\n              : null}\n            <br />\n            <br />\n            <hr />\n            <PieChart width={800} height={400}>\n              <Pie\n                data={this.state.category}\n                cx={300}\n                cy={200}\n                innerRadius={60}\n                outerRadius={100}\n                labelLine={false}\n                label={renderCustomizedLabel}\n                fill=\"#8884d8\"\n                paddingAngle={5}\n                dataKey=\"value\"\n              >\n                {this.state.category\n                  ? this.state.category.map((entry, index) => (\n                      <Cell\n                        key={`cell-${index}`}\n                        fill={COLORS[index % COLORS.length]}\n                      />\n                    ))\n                  : null}\n              </Pie>\n            </PieChart>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default CustomPieChart;\n"]},"metadata":{},"sourceType":"module"}